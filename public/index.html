<html>
<head>
	<title>You're Much Older Than The Athletes You Cheer For</title>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
	<link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
	<style>
	.nba{
		color:red;
	}
	.nfl{
		color:blue;
	}
	.mlb{
		color:green;
	}
	.nhl{
		color:purple;
	}
	</style>
	<script src="./chart.js"></script>
</head>
<body>
	<div class="container">
		<h3>Enter your birthday to see what percentage of professional athletes in each sport are younger than you(MM/DD/YYYY)</h3>

		<input type="date" class="birthday"><br><br>
		<button class="btn btn-danger submit">Submit</button>
		<h1 class="nba"></h1>
		<canvas id="nbaChart"></canvas>
		<h1 class="nfl"></h1>
		<canvas id="nflChart"></canvas>
		<h1 class="mlb"></h1>
		<canvas id="mlbChart"></canvas>
		<h1 class="nhl"></h1>
		<canvas id="nhlChart"></canvas>
		<br>
		<br>
		<h3><a href="https://github.com/conorhastings/AgeComparer">Source Code</h3>
	</div>
</body>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-54659001-2', 'auto');
  ga('send', 'pageview');

</script>
<script>
$('.submit').on('click', function(){
	var birthday = $('.birthday')
	birthday = birthday[0].value
	$.get('/agedata?birthday='+birthday).done(function(response){

		console.log(response)
		$('.nba').text(response.nba+' percent of NBA players are younger than you')
		var nbaChartData = [{value:parseInt(response.nba),color:"#D0104C",highlight:"#E87A90",label:"% Players Younger"},{value:(100-parseInt(response.nba)),color:"#8E354A",highlight:"#FEDFE1",label:"% Players Older"}]
		makeDoughnutChart("#nbaChart",nbaChartData)
		$('.nfl').text(response.nfl+' percent of NFL players are younger than you')
		var nflChartData = [{value:parseInt(response.nfl),color:"#58B2DC",highlight:"#006284",label:"% Players Younger"},{value:(100-parseInt(response.nfl)),color:"#2E5C6E",highlight:"#2EA9DF",label:"% Players Older"}]
		makeDoughnutChart("#nflChart",nflChartData)
		$('.mlb').text(response.mlb+' percent of MLB players are younger than you')
		var mlbChartData = [{value:parseInt(response.mlb),color:"#227D51",highlight:"#A8D8B9",label:"% Players Younger"},{value:(100-parseInt(response.mlb)),color:"#00AA90",highlight:"#66BAB7",label:"% Players Older"}]
		makeDoughnutChart("#mlbChart",mlbChartData)
		$('.nhl').text(response.nhl+' percent of NHL players are younger than you')
		var nhlChartData = [{value:parseInt(response.nhl),color:"#533D5B",highlight:"#B28FCE",label:"% Players Younger"},{value:(100-parseInt(response.nhl)),color:"#72636E",highlight:"#6D2E5B",label:"% Players Older"}]
		makeDoughnutChart("#nhlChart",nhlChartData)



	})
});


function makeDoughnutChart(canvas,chartData){
	var ctx = $(canvas).get(0).getContext('2d');
	var donutChart = new Chart(ctx).Doughnut(chartData, { segmentShowStroke: true, segmentStrokeColor: '#fff', segmentStrokeWidth: 2, percentageInnerCutout: 50, animationSteps: 100, animationEasing: 'easeOutBounce', animateRotate: true})
}


</script>
</html>